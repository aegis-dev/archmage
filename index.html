<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <title>Archmage - Fantasy Virtual Machine</title>
        <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    </head>
    <body>
        <div align="center">
            <input type="file" id="kernel_upload">
        </div>
        <div align="center">
            <canvas id="canvas" height="540" width="960"></canvas>
        </div>
        <script type="module">
            import init from "./pkg/archmage.js";

            document.getElementById('kernel_upload').addEventListener('change', handleKernelLoad, false);

            function handleKernelLoad(event) {
                const reader = new FileReader()
                reader.onload = start;
                reader.readAsArrayBuffer(event.target.files[0]);
                document.getElementById('kernel_upload').style.display = 'none';
            }

            function start(event) {
                window.kernel = new Uint8Array(event.target.result);
                init();
            }
        </script>
    </body>
</html>